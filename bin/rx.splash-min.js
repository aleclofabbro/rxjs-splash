(function(){var n,e,t,r,i;i=window.sx={utils:{},internal:{},binders:{}};t=function(){};e={dispose:t};n=function(n){return n};i.utils.arrayDiff=function(n,e){var t,r,i,u,o,s;r=[];for(i=0,o=n.length;i<o;i++){t=n[i];if(e.indexOf(t)<0){r.push({item:t,status:"remove"})}}for(u=0,s=e.length;u<s;u++){t=e[u];if(n.indexOf(t)<0){r.push({item:t,status:"add"})}}return r};i.utils.parseBindingOptions=function(n,e){var t,r;if(e==null){e={}}if(typeof n==="function"||typeof n.onNext==="function"||typeof n.subscribe==="function"){e.source=n;return e}e.source=n.subject||n.action;for(t in n){r=n[t];e[t]=r}return e};i.utils.unwrap=function(n){if(typeof n.subscribe==="function"){return n.value}return n};i.utils.bind=function(n,t){if(typeof n.subscribe==="function"){return n.subscribe(t)}if(typeof t.onNext==="function"){t.onNext(n)}else{t(n)}return e};i.utils.combine=function(n){var e,t,r,u;t=[];u=[];for(e in n){r=n[e];t.push(e);u.push(i.utils.wrap(r))}return Rx.Observable.combineLatest(u,function(){var n,r,i,u;r={};for(n=i=0,u=t.length;i<u;n=++i){e=t[n];r[e]=arguments[n]}return r})};i.utils.toJS=function(n){return JSON.stringify(n,function(n,e){if(e instanceof i.ObservableArray){return e.values}if(e instanceof Rx.Observable){return e.value}if(e instanceof Rx.Observer){return void 0}return e})};i.utils.wrap=function(n){if(typeof n.subscribe==="function"){return n}return new Rx.BehaviorSubject(n)};i.bind=function(n,e){e=$(e||window.document.body);return i.internal.bind(e,{vm:n,vmRoot:n,vmParent:void 0})};i.computed=function(n){return Rx.Observable.create(function(e){return i.utils.combine(n.params).select(n.read).subscribe(e)})};i.internal.parseBindings=function(n,e){var t,r,i,u,o,s;t=n.attr("data-splash");if(!t){return null}i=["$data","$root","$parent"];o=[e.vm,e.vmRoot,e.vmParent];s=e.vm;for(r in s){u=s[r];i.push(r);o.push(u)}return new Function(i,"return { "+t+" };").apply(null,o)};i.internal.bind=function(n,e){var t,r,u,o;r=i.internal.parseBindings(n,e);u=new Rx.CompositeDisposable;for(t in r){o=r[t];u.add(i.binders[t](n,e,o))}n.children().each(function(){return u.add(i.internal.bind($(this),e))});return u};i.binders.attr=function(n,e,t){var r,u,o,s;r=new Rx.CompositeDisposable;s=function(){var e;e=u;return r.add(i.utils.bind(o,function(t){n.attr(e,t)}))};for(u in t){o=t[u];s()}return r};i.binders.checked=function(n,e,t){var r,u,o;if(t.onNext){u=t;r=n.onAsObservable("change").select(function(){return n.prop("checked")}).subscribe(function(n){u.onNext(n)})}o=i.utils.bind(t,function(e){n.prop("checked",e)});return new Rx.CompositeDisposable(r,o)};i.binders.click=function(n,e,t){return i.binders.event(n,e,t,"click",true)};i.binders.css=function(n,e,t){var r,u,o,s;r=new Rx.CompositeDisposable;s=function(){var e;e=u;return r.add(i.utils.bind(o,function(t){n.toggleClass(e,t)}))};for(u in t){o=t[u];s()}return r};i.binders.foreach=function(n,e,t){var r,u;t=i.utils.parseBindingOptions(t);u=n.html().trim();n.empty();r=new Rx.CompositeDisposable;setTimeout(function(){return r.add(t.source.where(function(n){return n}).subscribe(function(t){var r,o,s,c,a,f;n.empty();f=[];for(c=0,a=t.length;c<a;c++){s=t[c];o=$(u).appendTo(n);f.push(r=i.internal.bind(o,{vm:s,vmRoot:e.vmRoot,vmParent:e.vm}))}return f}))});return r};i.binders.preview=function(n,e,t){t=i.utils.parseBindingOptions(t);return n.onAsObservable("change").select(function(n){return n.target.files}).where(function(n){return n!=null?n.length:void 0}).select(function(n){var e,t,i,u;u=[];for(t=0,i=n.length;t<i;t++){e=n[t];u.push(r(e))}return u}).subscribe(t.source)};r=function(n){return Rx.Observable.create(function(e){var t;t=new FileReader;t.onload=function(n){return e.onNext(n.target.result)};return t.readAsDataURL(n)})};i.binders.event=function(n,e,t,r){var i;if(r==null){r=t.type}i=$(n).onAsObservable(r);if(typeof t==="function"){return i.subscribe(function(r){t({target:n,context:e,e:r})})}return i.subscribe(function(r){t.onNext({target:n,context:e,e:r})})};i.binders.visible=function(n,e,t){return i.utils.bind(obsOrValue,function(e){n.css("display",e?"":"none")})};i.binders.text=function(n,e,t){return i.utils.bind(t,function(e){n.text(e)})};i.binders.html=function(n,e,t){return i.utils.bind(t,function(e){n.html(e)})};i.binders.value=function(n,e,t){var r,u,o,s,c,a;t=i.utils.parseBindingOptions(t);if(t.on&&t.on.indexOf("after")===0){t.on=t.on.slice(5);t.delay=true}if(typeof t.source.onNext==="function"){c=t.source;s=n.onAsObservable(t.on||"change");if(t.delay){s=s.delay(0)}o=s.select(function(){return n.val()}).subscribe(function(n){c.onNext(n)})}if(t.source instanceof Rx.Observable){u=n.onAsObservable("focus");r=n.onAsObservable("blur");t.source=t.source.takeUntil(u).concat(r.take(1)).repeat()}a=i.utils.bind(t.source,function(e){n.val(e)});return new Rx.CompositeDisposable(o,a)}}).call(this);