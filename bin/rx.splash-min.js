(function(){var n,e,t;t=window.sx={utils:{},internal:{},binders:{}};e=function(){};n={dispose:e};t.utils.bind=function(n,e){if(n.subscribe){return n.subscribe(e)}return e(n)};t.utils.unwrap=function(n){if(n.value&&n.subscribe){return n.value}return n};t.utils.wrap=function(n){if(n.value&&n.subscribe){return n}return new Rx.BehaviorSubject(n)};t.bind=function(n,e){e=$(e||window.document.body);return t.internal.bind(e,{vm:n,vmRoot:n,vmParent:void 0})};t.internal.bind=function(n,e){var i,r,u;r=t.internal.parseBindings(n,e);for(i in r){u=r[i];t.binders[i](n,e,u)}return n.children().each(function(){return t.internal.bind($(this),e)})};t.internal.parseBindings=function(n,e){var t,i,r,u,s,o;t=n.attr("data-splash");if(!t){return null}r=["$data","$root","$parent"];s=[e.vm,e.vmRoot,e.vmParent];o=e.vm;for(i in o){u=o[i];r.push(i);s.push(u)}return new Function(r,"return { "+t+" };").apply(null,s)};t.binders.click=function(n,e,i){return t.binders.event(n,e,i,"click")};t.binders.css=function(n,e,i){var r,u,s,o,a;u=new Rx.CompositeDisposable;for(s=o=0,a=i.length;o<a;s=++o){r=i[s];u.add(t.utils.bind(s,function(e){n.css(r,e)}))}return u};t.binders.event=function(n,e,t,i){var r;if(i==null){i=t.type}r=$(n).onAsObservable(i);if(typeof t==="function"){return r.subscribe(function(n){t({context:e,e:n})})}return r.subscribe(function(n){t.onNext({context:e,e:n})})};t.binders.foreach=function(n,i,r){var u;u=n.html().trim();n.empty();return r.delay(0).subscribe(function(r){var s,o,a;o=$(u).appendTo(n);s=t.internal.bind(o,{vm:r.value,vmRoot:i.vmRoot,vmParent:i.vm});a=function(){o.remove();return s.dispose()};r.subscribe(e,a,a)})};t.binders.html=function(n,e,i){return t.utils.bind(i,function(e){n.html(e)})};t.binders.text=function(n,e,i){return t.utils.bind(i,function(e){n.text(e)})};t.binders.value=function(n,e,i){var r,u,s,o,a;if(i.onNext){o=i;s=n.onAsObservable("change").subscribe(function(e){o.onNext(n.val())})}if(i.subscribe){u=n.onAsObservable("focus");r=n.onAsObservable("blur");i=i.takeUntil(r).concat(r.take(1)).repeat()}a=t.utils.bind(i,function(e){n.val(e)});return new Rx.CompositeDisposable(s,a)}}).call(this);