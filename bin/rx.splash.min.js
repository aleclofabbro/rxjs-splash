/* RxJS-Splash Copyright (c) Christopher Harris 2013 */
!function(a,b){var c="object"==typeof exports&&exports,d=("object"==typeof module&&module&&module.exports==c&&module,"object"==typeof global&&global);d.global===d&&(a=d);var e={util:{},internal:{},binders:{}},f=Rx.Disposable.empty;return e.util.link=function(a,b){return"function"==typeof a.subscribe?a.subscribe(b):("function"==typeof b.onNext?b.onNext(a):b(a),f)},e.util.wrap=function(a){return"function"==typeof a.subscribe?a:new Rx.BehaviorSubject(a)},e.util.combine=function(a){var b=[],c=[];for(var d in a)b.push(d),c.push(e.util.wrap(a[d]));return Rx.Observable.combineLatest(c,function(){for(var a={},c=0,d=b.length;d>c;c++)a[b[c]]=arguments[c];return a})},function(){var a=function(a){return-1!==this.indexOf(a)},b=function(a){return-1===this.indexOf(a)},c=function(a){return{value:a,status:this.toString()}};e.util.arrayDiff=function(d,e){var f=e.filter(b,d).map(c,"added"),g=e.filter(a,d).map(c,"retained"),h=d.filter(b,e).map(c,"removed");return f.concat(g,h)}}(),e.internal.parse=function(a,b){var c=a.getAttribute("data-splash");if(!c)return null;var d=b.vm,e=["$data","$root","$parent"],f=[d,b.vmRoot,b.vmParent];for(var g in d)e.push(g),f.push(d[g]);return new Function(e,"return { "+c+" };").apply(null,f)},e.internal.formatOptions=function(a){var b=typeof a;return"function"===b||"string"===b||"number"===b||"function"==typeof a.subscribe||"function"==typeof a.onNext?{source:a}:a},e.internal.bind=function(a,b){return Rx.Observable.create(function(c){var d=e.internal.parse(a,b);for(var f in d){var g=e.internal.formatOptions(d[f]),h=e.binders[f](a,b,g);c.onNext(h)}for(var i=a.children,j=0,k=i.length;k>j;j++)c.onNext(e.internal.bind(i[j],b))}).mergeObservable()},e.bind=function(a,c,d,f,g){return c===b?c=document.body:"string"==typeof c&&(c=document.getElementById(c)),e.internal.bind(c,{vm:a,vmRoot:a,vmParent:b}).subscribe(d,f,g)},e.binders.text=function(a,b,c){return c.source.doAction(function(b){a.textContent=b})},"function"==typeof define&&"object"==typeof define.amd&&define.amd?(a.sx=e,define(function(){return e})):(c?"object"==typeof module&&module&&module.exports==c?module.exports=e:c=e:a.sx=e,void 0)}(this);